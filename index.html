<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- SEO & Meta Tags -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“¦</text></svg>">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <title>LiveTrackings.com - AI Courier Tracker</title>
    <meta name="description" content="Track FedEx, UPS, USPS, Amazon, DHL with the world's first AI predictive engine." />
    
    <!-- Fonts & Tailwind -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Icon Library -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
      body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; overflow-x: hidden; }
      .glass-card {
        background: rgba(255, 255, 255, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.5);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
      }
      .gradient-text {
        background: linear-gradient(to right, #2563eb, #7c3aed);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .animate-slide-up { animation: slideUp 0.6s ease-out; }
      @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Helper function to re-initialize Lucide icons after state updates
      const initializeIcons = () => {
          if (window.lucide && typeof window.lucide.createIcons === 'function') {
              window.lucide.createIcons();
          }
      };

      // --- AI ENGINE LOGIC (Calls the Secure Backend Proxy) ---
      const fetchPrediction = async (trackingNumber) => {
        try {
            // This URL MUST resolve to your deployed serverless function (e.g., Vercel / Netlify)
            const response = await fetch('/api/predict', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ trackingNumber })
            });
            
            if (!response.ok) {
                const errorText = await response.text();
                // Fallback attempt to parse JSON error message
                try {
                    const error = JSON.parse(errorText);
                    throw new Error(error.message || `Proxy failed with status ${response.status}.`);
                } catch {
                    throw new Error(`Proxy failed with status ${response.status}. Server response: ${errorText.substring(0, 100)}...`);
                }
            }
            
            return await response.json();

        } catch (e) {
            console.error("Tracking Error:", e.message);
            // Fallback object returned to the ResultDashboard if connection fails
             return {
                 status: "Connection Failed",
                 carrier: "Error",
                 location: "Check Network",
                 prediction: `Unable to connect to the tracking service. Check your network or ensure the backend serverless function is deployed correctly at /api/predict. Error: ${e.message}`,
                 confidence: 0,
                 weatherRisk: "High",
                 source: "Connection Failure"
            };
        }
      };

      // --- COMPONENTS ---
      
      const Header = () => {
        useEffect(initializeIcons, []);
        return (
            <header className="fixed w-full z-50 bg-white/80 backdrop-blur-md border-b border-gray-200 transition-all duration-300">
              <div className="max-w-7xl mx-auto px-4 sm:px-6 h-20 flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="bg-blue-600 p-2 rounded-xl shadow-lg shadow-blue-600/20">
                    <i data-lucide="package" className="text-white w-6 h-6"></i>
                  </div>
                  <span className="font-black text-2xl text-gray-900 tracking-tighter">Live<span className="text-blue-600">Trackings</span></span>
                </div>
                <nav className="hidden md:flex gap-8 font-medium text-sm text-gray-600">
                  <a href="#features" className="hover:text-blue-600 transition">AI Features</a>
                  <a href="#blog" className="hover:text-blue-600 transition">Tracking Insights</a>
                </nav>
              </div>
            </header>
        );
      };

      const Hero = ({ onTrack }) => {
        const [input, setInput] = useState('');
        const [loading, setLoading] = useState(false);

        const handleSubmit = async (e) => {
          e.preventDefault();
          if (!input.trim()) return;
          setLoading(true);
          await onTrack(input);
          setLoading(false);
        };
        
        useEffect(initializeIcons, [loading]);

        return (
          <section className="pt-32 pb-20 px-4 text-center bg-gradient-to-b from-blue-50 to-white overflow-hidden relative">
            <div className="relative z-10 max-w-4xl mx-auto animate-slide-up">
              <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100 text-blue-700 text-xs font-bold uppercase tracking-wider mb-8 border border-blue-200 shadow-sm">
                <span className="relative flex h-2 w-2">
                  <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
                  <span className="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
                </span>
                The First AI-Powered Tracker
              </div>
              
              <h1 className="text-5xl md:text-7xl font-black text-gray-900 mb-8 leading-tight tracking-tight">
                Track Smarter.<br />
                <span className="gradient-text">Predict Faster.</span>
              </h1>
              
              <p className="text-lg md:text-xl text-gray-600 mb-10 max-w-2xl mx-auto leading-relaxed">
                Beat traditional trackers. We use AI to analyze logistics data, weather, and traffic to tell you exactly when your package will arrive.
              </p>

              <div className="glass-card p-3 rounded-2xl max-w-2xl mx-auto transform hover:scale-[1.01] transition duration-300">
                <form onSubmit={handleSubmit} className="flex flex-col md:flex-row gap-3">
                  <input 
                    type="text" 
                    value={input}
                    onChange={(e) => setInput(e.target.value)}
                    placeholder="Enter tracking number..." 
                    className="flex-grow p-4 rounded-xl text-lg bg-gray-50 border border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all placeholder-gray-400 text-gray-800 font-medium"
                  />
                  <button 
                    type="submit" 
                    disabled={loading}
                    className="bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-8 rounded-xl text-lg transition-all disabled:opacity-80 disabled:cursor-not-allowed flex items-center justify-center gap-2 shadow-lg shadow-blue-600/30 min-w-[180px]"
                  >
                    {loading ? (
                      <>
                        <i data-lucide="loader-2" className="animate-spin"></i>
                        Analyzing...
                      </>
                    ) : (
                      <>
                        AI Track
                        <i data-lucide="arrow-right" className="w-5 h-5"></i>
                      </>
                    )}
                  </button>
                </form>
              </div>
            </div>
          </section>
        );
      };

      const ResultDashboard = ({ data, number }) => {
        useEffect(initializeIcons, [data]);

        // Determine icon and color based on status
        let statusIcon = "check-circle";
        let statusColor = "bg-green-400";
        if (data.status.includes("Connection") || data.status.includes("Failed") || data.status.includes("Error")) {
            statusIcon = "alert-triangle";
            statusColor = "bg-red-400";
        } else if (data.status.includes("Transit")) {
            statusIcon = "truck";
            statusColor = "bg-yellow-400";
        }

        return (
            <section className="py-12 px-4 bg-white animate-slide-up">
              <div className="max-w-5xl mx-auto">
                <div className="bg-white border border-gray-200 rounded-3xl shadow-2xl overflow-hidden">
                  
                  {/* Status Header */}
                  <div className="bg-slate-900 p-6 md:p-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 text-white">
                    <div>
                      <p className="text-blue-400 font-bold text-sm uppercase tracking-widest mb-1">Tracking ID</p>
                      <h2 className="text-3xl font-mono font-bold tracking-wider">{number}</h2>
                    </div>
                    <div className="flex items-center gap-3 bg-white/10 px-4 py-2 rounded-lg backdrop-blur-sm border border-white/10">
                      <i data-lucide={statusIcon} className={`w-4 h-4 text-white ${statusColor === 'bg-green-400' ? 'animate-pulse' : ''}`}></i>
                      <span className="font-bold tracking-wide">{data.status}</span>
                    </div>
                  </div>

                  <div className="p-6 md:p-10 grid md:grid-cols-3 gap-10">
                    
                    {/* Main Prediction (USP) */}
                    <div className="md:col-span-2 space-y-6">
                      <div className="flex items-start gap-4">
                        <div className="bg-blue-100 p-3 rounded-xl">
                          <i data-lucide="brain-circuit" className="w-8 h-8 text-blue-600"></i>
                        </div>
                        <div>
                          <h3 className="text-xl font-bold text-gray-900">AI Delivery Prediction</h3>
                          <p className="text-gray-600 mt-2 leading-relaxed">{data.prediction}</p>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4 mt-6">
                        <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                          <p className="text-xs text-gray-500 font-semibold uppercase">Carrier</p>
                          <p className="text-lg font-bold text-gray-900">{data.carrier}</p>
                        </div>
                        <div className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                          <p className="text-xs text-gray-500 font-semibold uppercase">Location</p>
                          <p className="text-lg font-bold text-gray-900 truncate">{data.location}</p>
                        </div>
                      </div>
                    </div>

                    {/* Confidence Sidebar */}
                    <div className="bg-slate-50 p-6 rounded-2xl border border-slate-100 flex flex-col justify-center">
                       <div className="text-center mb-4">
                          <div className={`text-5xl font-black mb-1 ${data.confidence >= 80 ? 'text-green-600' : data.confidence > 50 ? 'text-yellow-600' : 'text-red-600'}`}>{data.confidence}%</div>
                          <p className="text-sm font-bold text-gray-500 uppercase">Confidence</p>
                       </div>
                       <div className="space-y-3 text-sm">
                          <div className="flex justify-between py-2 border-b border-gray-200">
                            <span className="text-gray-500">Weather Risk</span>
                            <span className="font-bold text-gray-800">{data.weatherRisk}</span>
                          </div>
                          <div className="flex justify-between py-2 border-b border-gray-200">
                            <span className="text-gray-500">Engine</span>
                            <span className="font-bold text-blue-600 truncate max-w-[120px]">{data.source}</span>
                          </div>
                       </div>
                    </div>

                  </div>
                </div>
              </div>
            </section>
        );
      };

      const BlogSection = () => {
        useEffect(initializeIcons, []);
        return (
            <section id="blog" className="py-24 bg-gray-50 px-4">
              <div className="max-w-6xl mx-auto">
                <div className="text-center mb-16">
                  <h2 className="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4">Tracking Intelligence</h2>
                  <p className="text-lg text-gray-600">Why AI tracking beats traditional database lookups.</p>
                </div>
                
                <div className="grid md:grid-cols-3 gap-8">
                  <article className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl transition duration-300 group">
                    <div className="h-48 bg-blue-600 relative overflow-hidden flex items-center justify-center">
                       <i data-lucide="zap" className="text-white w-16 h-16 opacity-80"></i>
                    </div>
                    <div className="p-6">
                      <h3 className="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition">Real-Time vs. Cached</h3>
                      <p className="text-gray-500 text-sm leading-relaxed mb-4">
                        Traditional trackers show you yesterday's data. LiveTrackings uses AI to scan live logistics networks for real-time status.
                      </p>
                      <a href="#" className="text-blue-600 font-bold text-sm inline-flex items-center">Read Analysis <i data-lucide="arrow-right" className="w-4 h-4 ml-1"></i></a>
                    </div>
                  </article>
                  <article className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl transition duration-300 group">
                     <div className="h-48 bg-indigo-600 relative overflow-hidden flex items-center justify-center">
                       <i data-lucide="shield-check" className="text-white w-16 h-16 opacity-80"></i>
                    </div>
                    <div className="p-6">
                      <h3 className="text-xl font-bold text-gray-900 mb-3 group-hover:text-indigo-600 transition">The 95% Confidence Score</h3>
                      <p className="text-gray-500 text-sm leading-relaxed mb-4">
                        How our AI calculates delivery probability by analyzing weather patterns, port congestion, and carrier delays.
                      </p>
                      <a href="#" className="text-indigo-600 font-bold text-sm inline-flex items-center">Read Guide <i data-lucide="arrow-right" className="w-4 h-4 ml-1"></i></a>
                    </div>
                  </article>
                  <article className="bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-xl transition duration-300 group">
                    <div className="h-48 bg-slate-800 relative overflow-hidden flex items-center justify-center">
                       <i data-lucide="lock" className="text-white w-16 h-16 opacity-80"></i>
                    </div>
                    <div className="p-6">
                      <h3 className="text-xl font-bold text-gray-900 mb-3 group-hover:text-blue-600 transition">Privacy First</h3>
                      <p className="text-gray-500 text-sm leading-relaxed mb-4">
                        We don't store your tracking data. Learn how our stateless AI engine protects your shipment information.
                      </p>
                      <a href="#" className="text-slate-700 font-bold text-sm inline-flex items-center">Our Manifesto <i data-lucide="arrow-right" className="w-4 h-4 ml-1"></i></a>
                    </div>
                  </article>
                </div>
              </div>
            </section>
        );
      };

      const Footer = () => (
        <footer className="bg-slate-900 text-white py-12 border-t border-slate-800">
          <div className="max-w-7xl mx-auto px-4 text-center">
              <div className="flex items-center justify-center gap-2 mb-4">
                <span className="text-2xl">ðŸ“¦</span>
                <span className="font-black text-xl tracking-tight">LiveTrackings</span>
              </div>
            <p className="text-slate-500 text-sm">
              Â© 2025 LiveTrackings.com. The First AI Courier Tracker. All rights reserved.
            </p>
          </div>
        </footer>
      );

      // --- MAIN APP ---
      const App = () => {
        const [trackingData, setTrackingData] = useState(null);

        useEffect(initializeIcons, []);

        return (
          <div className="min-h-screen flex flex-col">
            <Header />
            <main>
              <Hero onTrack={async (num) => {
                const data = await fetchPrediction(num);
                setTrackingData({ ...data, number: num });
                // Scroll to results section smoothly
                setTimeout(() => {
                    const el = document.getElementById('results-section');
                    if(el) el.scrollIntoView({ behavior: 'smooth' });
                }, 200);
              }} />
              
              {trackingData && (
                  <div id="results-section">
                    <ResultDashboard data={trackingData} number={trackingData.number} />
                  </div>
              )}

              <BlogSection />
            </main>
            <Footer />
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>
